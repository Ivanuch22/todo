const input=document.querySelector(".block-input"),button=document.querySelector("button"),block=document.querySelector(".block-top");let id=0,arrayGlobal=[];addNewTask=(e,t)=>{const a=document.createElement("div");a.classList.add("block-line"),a.innerHTML=`\n    <div class="block-checkbox">\n        ${t?'<input  type="checkbox" checked >':'<input  type="checkbox" >'}\n    </div>\n    <p class="block-title">${e} <div  class="block-button">Удалить</div> </p>\n    `,block.append(a)},changeValue=e=>{let t=localStorage.getItem("task");t=JSON.parse(t),t[e].value?t[e].value=!1:t[e].value=!0,localStorage.setItem("task",JSON.stringify(t))},setLocalStorageInput=(e,t,a)=>{arrayGlobal.push({name:e,id:t,value:a}),localStorage.setItem("task",JSON.stringify(arrayGlobal))},getLocalStorageInput=()=>{let e=localStorage.getItem("task");e=JSON.parse(e),e?(e.forEach(e=>{id=e.id}),arrayGlobal.push(...e),arrayGlobal.forEach(e=>{const{name:t,value:a}=e;addNewTask(t,a)})):arrayGlobal=[]},getLocalStorageInput(),button.addEventListener("click",e=>{e.preventDefault(),input.value&&(id++,setLocalStorageInput(input.value,id,!1),addNewTask(input.value,!1),input.value="")}),block.addEventListener("click",e=>{document.querySelectorAll("input[type=checkbox]").forEach((t,a)=>{e.target===t&&changeValue(a)})}),block.addEventListener("click",e=>{const t=document.querySelectorAll(".block-button");let a=localStorage.getItem("task");a=JSON.parse(a),t.forEach((t,l)=>{if(e.target===t){e.preventDefault();let t=a.slice(0,l),o=a.slice(++l);const c=[];c.push(...t,...o),arrayGlobal.splice(0),arrayGlobal.push(...c),block.innerHTML="",c.forEach((e,t)=>{addNewTask(e.name,e.value)}),localStorage.setItem("task",JSON.stringify(arrayGlobal))}})});